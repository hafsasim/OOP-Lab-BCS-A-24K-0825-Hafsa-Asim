#include <iostream>
#include <stdexcept>
using namespace std;

class OutOfBoundsException:public exception{
public:
    const char* what()const noexcept{
        return "Invalid index access attempted!";
    }
};

template<typename T>
class SmartArray{
    T* arr;
    int length;
public:
    SmartArray(int n){
        this->length = n;
        arr = new T[n];
    }

    ~SmartArray(){
        delete[] arr;
    }

    T& operator[](int idx){
        if(idx<0 || idx>=this->length){
            throw OutOfBoundsException();
        }
        return arr[idx];
    }

    int size(){
        return this->length;
    }
};

int main(){
    int size;
    cout<<"Array size: ";
    cin>>size;

    SmartArray<int> nums(size);

    cout<<"Enter elements: ";
    for(int i=0;i<size;i++){
        cin>>nums[i];
    }

    cout<<"Accessing index 2: "<<nums[2]<<endl;

    int testIdx = 5;
    cout<<"Accessing index "<<testIdx<<":"<<endl;
    try{
        cout<<nums[testIdx]<<endl;
    }
    catch(OutOfBoundsException &e){
        cout<<"OutOfBoundsException caught: "<<e.what()<<endl;
    }

    return 0;
}
